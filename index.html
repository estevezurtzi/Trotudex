<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trotudex</title>
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@google/model-viewer/dist/model-viewer.min.js"></script>
</head>
<body class="light-theme">
    <!-- Modal de Login/Registro -->
    <div id="auth-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="auth-container">
                <div class="auth-header">
                    <div class="pokeball-logo-small"></div>
                    <h2>Bienvenido a la Pok√©dex</h2>
                    <p>Inicia sesi√≥n para guardar tu progreso, o contin√∫a como invitado</p>
                </div>
                
                <div class="auth-tabs">
                    <button class="auth-tab active" data-tab="login">Iniciar Sesi√≥n</button>
                    <button class="auth-tab" data-tab="register">Registrarse</button>
                </div>
                
                <form id="login-form" class="auth-form active" novalidate>
                    <div class="form-group">
                        <label for="login-username">Usuario:</label>
                        <input type="text" id="login-username" required aria-required="true" aria-describedby="login-username-help">
                        <small id="login-username-help">M√≠nimo 3 caracteres</small>
                    </div>
                    <div class="form-group">
                        <label for="login-password">Contrase√±a:</label>
                        <input type="password" id="login-password" required aria-required="true" aria-describedby="login-password-help">
                        <small id="login-password-help">Ingresa tu contrase√±a</small>
                    </div>
                    <button type="submit" class="pokedex-button auth-button" aria-label="Iniciar sesi√≥n">Iniciar Sesi√≥n</button>
                    <div id="login-error" class="error-message" role="alert" aria-live="polite"></div>
                </form>
                
                <form id="register-form" class="auth-form" novalidate>
                    <div class="form-group">
                        <label for="register-username">Usuario:</label>
                        <input type="text" id="register-username" required minlength="3" maxlength="20" aria-required="true" aria-describedby="register-username-help">
                        <small id="register-username-help">3-20 caracteres</small>
                    </div>
                    <div class="form-group">
                        <label for="register-email">Email:</label>
                        <input type="email" id="register-email" required aria-required="true" aria-describedby="register-email-help">
                        <small id="register-email-help">Formato: ejemplo@dominio.com</small>
                    </div>
                    <div class="form-group">
                        <label for="register-password">Contrase√±a:</label>
                        <input type="password" id="register-password" required minlength="6" maxlength="50" aria-required="true" aria-describedby="register-password-help">
                        <small id="register-password-help">M√≠nimo 6 caracteres</small>
                    </div>
                    <div class="form-group">
                        <label for="register-confirm-password">Confirmar Contrase√±a:</label>
                        <input type="password" id="register-confirm-password" required aria-required="true">
                    </div>
                    <button type="submit" class="pokedex-button auth-button" aria-label="Registrarse">Registrarse</button>
                    <div id="register-error" class="error-message" role="alert" aria-live="polite"></div>
                </form>
                
                <div class="auth-footer">
                    <button id="continue-without-login" class="pokedex-button secondary">
                        Continuar como Invitado
                    </button>
                    <p style="margin-top: 10px; font-size: 12px; color: #666;">
                        Puedes iniciar sesi√≥n despu√©s desde el bot√≥n en la esquina superior izquierda
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Barra de usuario -->
    <div class="user-bar" id="user-bar">
        <div class="user-info">
            <img id="user-avatar" src="" alt="Avatar" class="user-avatar">
            <span id="username-display" class="username">Invitado</span>
        </div>
        <div class="user-actions">
            <button id="login-btn" class="pokedex-button small">Iniciar Sesi√≥n</button>
            <button id="edit-profile-btn" class="pokedex-button small" style="display: none;">Editar Perfil</button>
            <button id="logout-btn" class="pokedex-button small" style="display: none;">Cerrar Sesi√≥n</button>
        </div>
    </div>

    <!-- Modal de Edici√≥n de Perfil -->
    <div id="profile-modal" class="modal" style="display: none;">
        <div class="modal-content profile-modal">
            <div class="modal-header">
                <h2>Editar Perfil</h2>
                <button class="close-button">&times;</button>
            </div>
            <div class="profile-form">
                <div class="avatar-section" id="avatar-section">
                    <img id="profile-avatar" src="" alt="Avatar" class="profile-avatar">
                    <input type="file" id="avatar-upload" accept="image/*" style="display: none;">
                    <button id="change-avatar-btn" class="pokedex-button small">Cambiar Avatar</button>
                </div>
                <div class="form-group">
                    <label for="profile-username">Nombre de Usuario:</label>
                    <input type="text" id="profile-username" required minlength="3">
                </div>
                <div class="form-group">
                    <label for="profile-email">Email:</label>
                    <input type="email" id="profile-email" required>
                </div>
                <div class="form-group">
                    <label for="current-password">Contrase√±a Actual (para cambios):</label>
                    <input type="password" id="current-password">
                </div>
                <div class="form-group">
                    <label for="new-password">Nueva Contrase√±a:</label>
                    <input type="password" id="new-password" minlength="6">
                </div>
                <div class="form-actions">
                    <button type="button" id="save-profile-btn" class="pokedex-button">Guardar Cambios</button>
                    <button type="button" id="cancel-profile-btn" class="pokedex-button secondary">Cancelar</button>
                </div>
                <div id="profile-error" class="error-message"></div>
            </div>
        </div>
    </div>

    <!-- Controles de escritorio -->
    <div class="theme-toggle-container">
        <button id="theme-toggle" class="pokedex-button small">üåô Oscuro</button>
    <div class="sound-control-container">
        <button id="sound-toggle" class="pokedex-button small">üîä Sonido</button>
            <div class="sound-volume-slider-wrapper">
                <input type="range" id="volume-slider" class="volume-slider" min="0" max="100" value="100" aria-label="Controlar volumen">
                <span id="volume-percent">100%</span>
            </div>
        </div>
        <button id="shiny-toggle" class="pokedex-button small">‚ú® Shiny</button>
        <button id="sprite-toggle" class="pokedex-button small sprite-toggle-2d">üìê 2D</button>
        <button id="random-pokemon" class="pokedex-button small">üé≤ Aleatorio</button>
    </div>

    <!-- Contenido principal de la Pok√©dex -->
    <div class="pokedex-container" id="pokedex-container">
        <div class="pokedex-left">
            <div class="pokedex-header">
                <!-- LOGO Y T√çTULO CLICABLE -->
                <div class="header-logo" id="header-logo" style="display: flex; align-items: center; gap: 15px; cursor: pointer;">
                    <div class="pokeball-logo"></div>
                    <h1>Trotudex</h1>
                </div>
                <div class="header-actions">
                    <select id="region-filter" class="pokedex-button small">
                        <option value="all">Todas las regiones</option>
                        <option value="kanto">Kanto (1-151)</option>
                        <option value="johto">Johto (152-251)</option>
                        <option value="hoenn">Hoenn (252-386)</option>
                        <option value="sinnoh">Sinnoh (387-493)</option>
                        <option value="teselia">Teselia (494-649)</option>
                        <option value="kalos">Kalos (650-721)</option>
                        <option value="alola">Alola (722-809)</option>
                        <option value="galar">Galar (810-898)</option>
                        <option value="paldea">Paldea (899-1025)</option>
                    </select>
                    <button id="favorites-only" class="pokedex-button small filter-button">
                        <span class="button-icon">‚≠ê</span>    
                    </button>
                </div>
            </div>
            
<!-- B√∫squeda -->
            <div class="search-container">
                <div class="search-input-wrapper">
                    <input type="text" id="search-input" placeholder="Buscar Pok√©mon por nombre, tipo o n√∫mero..." aria-label="Buscar Pok√©mon" autocomplete="off">
                    <button id="search-btn" class="pokedex-button small search-advanced-btn" aria-label="Buscar">üîç Buscar</button>
                </div>
            </div>

            <!-- Modal de B√∫squeda Avanzada -->
            <div id="advanced-search-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                <h2>üîç B√∫squeda Avanzada</h2>
                <span class="close-button" id="close-advanced-search">&times;</span>
                </div>

                <div class="advanced-search-container">
                <!-- Filtros por Tipo -->
                <div class="filter-group active">
                    <div class="filter-group-header">
                    <h3>üõ°Ô∏è Tipos</h3>
                    <span class="filter-toggle">‚ñº</span>
                    </div>
                    <div class="filter-group-content">
                    <div class="type-filters-advanced">
                        <div class="type-relationship-controls">
                        <label>Relaci√≥n entre tipos:</label>
                        <div class="option-group">
                            <label>
                            <input type="radio" name="type-mode" id="type-any" value="any" checked>
                            <span>Cualquier tipo seleccionado</span>
                            </label>
                            <label>
                            <input type="radio" name="type-mode" id="type-all" value="both">
                            <span>Deben tener todos los tipos seleccionados</span>
                            </label>
                        </div>
                        </div>
                        <div class="advanced-type-filters" id="advanced-type-filters">
                        <!-- Los tipos se generar√°n din√°micamente -->
                        </div>
                    </div>
                    </div>
                </div>

                <!-- Filtros por Estad√≠sticas -->
                <div class="filter-group">
                    <div class="filter-group-header">
                    <h3>üìä Estad√≠sticas</h3>
                    <span class="filter-toggle">‚ñº</span>
                    </div>
                    <div class="filter-group-content">
                    <div class="stat-filters-advanced">
                        <div class="stat-filter-row">
                        <label>PS:</label>
                        <input type="number" id="stat-hp-min" placeholder="M√≠n" min="1" max="255">
                        <span>-</span>
                        <input type="number" id="stat-hp-max" placeholder="M√°x" min="1" max="255">
                        </div>
                        <div class="stat-filter-row">
                        <label>Ataque:</label>
                        <input type="number" id="stat-attack-min" placeholder="M√≠n" min="1" max="255">
                        <span>-</span>
                        <input type="number" id="stat-attack-max" placeholder="M√°x" min="1" max="255">
                        </div>
                        <div class="stat-filter-row">
                        <label>Defensa:</label>
                        <input type="number" id="stat-defense-min" placeholder="M√≠n" min="1" max="255">
                        <span>-</span>
                        <input type="number" id="stat-defense-max" placeholder="M√°x" min="1" max="255">
                        </div>
                        <div class="stat-filter-row">
                        <label>Ataque Especial:</label>
                        <input type="number" id="stat-special-attack-min" placeholder="M√≠n" min="1" max="255">
                        <span>-</span>
                        <input type="number" id="stat-special-attack-max" placeholder="M√°x" min="1" max="255">
                        </div>
                        <div class="stat-filter-row">
                        <label>Defensa Especial:</label>
                        <input type="number" id="stat-special-defense-min" placeholder="M√≠n" min="1" max="255">
                        <span>-</span>
                        <input type="number" id="stat-special-defense-max" placeholder="M√°x" min="1" max="255">
                        </div>
                        <div class="stat-filter-row">
                        <label>Velocidad:</label>
                        <input type="number" id="stat-speed-min" placeholder="M√≠n" min="1" max="255">
                        <span>-</span>
                        <input type="number" id="stat-speed-max" placeholder="M√°x" min="1" max="255">
                        </div>
                        <div class="stat-filter-row">
                        <label>BST Total:</label>
                        <input type="number" id="stat-total-min" placeholder="M√≠n" min="1" max="800">
                        <span>-</span>
                        <input type="number" id="stat-total-max" placeholder="M√°x" min="1" max="800">
                        </div>
                    </div>
                    </div>
                </div>

                <!-- Filtros por Caracter√≠sticas F√≠sicas -->
                <div class="filter-group">
                    <div class="filter-group-header">
                    <h3>üìè Caracter√≠sticas F√≠sicas</h3>
                    <span class="filter-toggle">‚ñº</span>
                    </div>
                    <div class="filter-group-content">
                    <div class="physical-filters">
                        <div class="physical-filter-row">
                        <label>Altura:</label>
                        <input type="number" id="height-min" placeholder="M√≠n" min="0.1" max="20" step="0.1">
                        <span>-</span>
                        <input type="number" id="height-max" placeholder="M√°x" min="0.1" max="20" step="0.1">
                        <span>m</span>
                        </div>
                        <div class="physical-filter-row">
                        <label>Peso:</label>
                        <input type="number" id="weight-min" placeholder="M√≠n" min="0.1" max="1000" step="0.1">
                        <span>-</span>
                        <input type="number" id="weight-max" placeholder="M√°x" min="0.1" max="1000" step="0.1">
                        <span>kg</span>
                        </div>
                        <div class="physical-filter-row">
                        <label>Color:</label>
                        <select id="color-filter">
                            <option value="">Cualquier color</option>
                            <option value="black">Negro</option>
                            <option value="blue">Azul</option>
                            <option value="brown">Marr√≥n</option>
                            <option value="gray">Gris</option>
                            <option value="green">Verde</option>
                            <option value="pink">Rosa</option>
                            <option value="purple">P√∫rpura</option>
                            <option value="red">Rojo</option>
                            <option value="white">Blanco</option>
                            <option value="yellow">Amarillo</option>
                        </select>
                        </div>
                    </div>
                    </div>
                </div>

                <!-- Filtros por Habilidades y Movimientos -->
                <div class="filter-group">
                    <div class="filter-group-header">
                    <h3>‚ö° Habilidades y Movimientos</h3>
                    <span class="filter-toggle">‚ñº</span>
                    </div>
                    <div class="filter-group-content">
                    <div class="ability-move-filters">
                        <div class="ability-filter-row">
                        <label>Habilidad:</label>
                        <input type="text" id="ability-filter" placeholder="Ej: Intimidaci√≥n, Cuerpo Llama...">
                        </div>
                        <div class="move-filter-row">
                        <label>Movimiento:</label>
                        <input type="text" id="move-filter" placeholder="Ej: Lanzallamas, Rayo Hielo...">
                        </div>
                        <div class="move-type-filter-row">
                        <label>Tipo de Movimiento:</label>
                        <select id="move-type-filter">
                            <option value="">Cualquier tipo</option>
                            <!-- Los tipos se generar√°n din√°micamente -->
                        </select>
                        </div>
                    </div>
                    </div>
                </div>

                <!-- Acciones -->
                <div class="advanced-search-actions">
                    <button id="apply-advanced-search" class="pokedex-button">üîç Buscar Pok√©mon</button>
                    <button id="reset-advanced-search" class="pokedex-button secondary">üîÑ Restablecer</button>
                    <button id="close-advanced-search-2" class="pokedex-button secondary">‚úï Cerrar</button>
                </div>
            </div>
        </div>
    </div>

            <div id="search-results-modal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                    <h2>üìã Resultados de la b√∫squeda</h2>
                    <span class="close-button" id="close-results">&times;</span>
                    </div>

                    <div id="search-results-container">
                    <!-- Aqu√≠ se mostrar√°n los Pok√©mon filtrados -->
                    <div id="results-grid" class="pokemon-grid"></div>
                    </div>

                    <div class="advanced-search-actions">
                    <button id="back-to-filters" class="pokedex-button secondary">‚¨ÖÔ∏è Volver a filtros</button>
                    <button id="close-results-2" class="pokedex-button secondary">‚úï Cerrar</button>
                    </div>
                </div>
            </div>

            <div class="pokemon-grid" id="pokemon-grid">
                <div class="loading">Cargando Pok√©mon...</div>
            </div>
        </div>
        
        <div class="pokedex-right">
            <div class="pokemon-detail" id="pokemon-detail">
                <div class="detail-header">
                    <div class="placeholder-img">Imagen Pok√©mon</div>
                    <div class="detail-title">
                        <div class="detail-name">Selecciona un Pok√©mon</div>
                        <div class="detail-id">#???</div>
                        <div class="detail-actions">
                            <button id="favorite-btn" class="pokedex-button small">
                                <span class="button-icon">‚òÜ</span> Favorito
                            </button>
                            <button id="team-add-btn" class="pokedex-button small team-add-btn">
                                <span class="button-icon">‚öîÔ∏è</span> Equipo
                            </button>
                            <button id="female-toggle" class="pokedex-button small inactive">
                                <span id="gender-display">‚ôÇ</span> G√©nero
                            </button>
                        </div>
                    </div>
                </div>
                <div class="detail-types">
                    <span class="type-badge">Tipo</span>
                </div>
                <p>Haz clic en un Pok√©mon para ver sus detalles</p>
            </div>
            
            <div class="tabs-container">
                <div class="tabs">
                    <button class="tab-button active" data-tab="stats">Estad√≠sticas</button>
                    <button class="tab-button" data-tab="info">Informaci√≥n</button>
                    <button class="tab-button" data-tab="evolution">Evoluciones</button>
                    <button class="tab-button" data-tab="moves">Movimientos</button>
                    <button class="tab-button" data-tab="weaknesses">Debilidades</button>
                </div>
                
                <div class="tab-content">
                    <div id="stats-tab" class="tab-pane active">
                        <div class="stats-container">
                            <div class="stats-title">Estad√≠sticas Base</div>
                            <div id="stats-list">
                                <p>Selecciona un Pok√©mon para ver sus estad√≠sticas</p>
                            </div>
                            <div class="stats-comparison" id="stats-comparison" style="display: none;">
                                <h4>Comparaci√≥n</h4>
                                <div id="comparison-chart"></div>
                            </div>
                        </div>
                    </div>                    
                    <div id="info-tab" class="tab-pane">
                        <div class="info-container">
                            <div class="info-item">
                                <span class="info-label">Altura:</span>
                                <span id="info-height">-</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Peso:</span>
                                <span id="info-weight">-</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Especie:</span>
                                <span id="info-species">-</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Habilidades:</span>
                                <span id="info-abilities">-</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Forma Corporal:</span>
                                <span id="info-body-shape">-</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Grupo de Huevo:</span>
                                <span id="info-egg-groups">-</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Ratio de G√©nero:</span>
                                <span id="info-gender-ratio">-</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Tasa de Captura:</span>
                                <span id="info-capture-rate">-</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Descripci√≥n:</span>
                                <p id="info-description">Selecciona un Pok√©mon para ver su descripci√≥n</p>
                            </div>
                        </div>
                    </div>
                    
                    <div id="evolution-tab" class="tab-pane">
                        <div class="evolution-container">
                            <div id="evolution-chain">
                                <p>Selecciona un Pok√©mon para ver su cadena evolutiva</p>
                            </div>
                        </div>
                    </div>
                    
                    <div id="moves-tab" class="tab-pane">
                        <div class="moves-container">
                            <div id="moves-list">
                                <p>Selecciona un Pok√©mon para ver sus movimientos</p>
                            </div>
                        </div>
                    </div>
                    
                    <div id="weaknesses-tab" class="tab-pane">
                        <div class="weaknesses-container">
                            <div id="weaknesses-chart">
                                <p>Selecciona un Pok√©mon para ver sus debilidades y resistencias</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="pokedex-buttons">
                <button class="pokedex-button" id="prev-button">‚óÄ Anterior</button>
                <button class="pokedex-button" id="history-button" title="Ver historial">üìú Historial</button>
                <button class="pokedex-button" id="next-button">Siguiente ‚ñ∂</button>
            </div>
        </div>
    </div>

    <!-- Modal de Equipos -->
    <div id="team-modal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h2>Mi Equipo Pok√©mon</h2>
                <button class="close-button">&times;</button>
            </div>
            <div class="team-container">
                <div class="team-slots">
                    <div class="team-slot" data-slot="1">
                        <div class="slot-empty">Vac√≠o</div>
                        <div class="slot-content" style="display: none;">
                            <img class="slot-img" src="" alt="">
                            <div class="slot-name"></div>
                            <button class="slot-remove">‚úï</button>
                        </div>
                    </div>
                    <div class="team-slot" data-slot="2">
                        <div class="slot-empty">Vac√≠o</div>
                        <div class="slot-content" style="display: none;">
                            <img class="slot-img" src="" alt="">
                            <div class="slot-name"></div>
                            <button class="slot-remove">‚úï</button>
                        </div>
                    </div>
                    <div class="team-slot" data-slot="3">
                        <div class="slot-empty">Vac√≠o</div>
                        <div class="slot-content" style="display: none;">
                            <img class="slot-img" src="" alt="">
                            <div class="slot-name"></div>
                            <button class="slot-remove">‚úï</button>
                        </div>
                    </div>
                    <div class="team-slot" data-slot="4">
                        <div class="slot-empty">Vac√≠o</div>
                        <div class="slot-content" style="display: none;">
                            <img class="slot-img" src="" alt="">
                            <div class="slot-name"></div>
                            <button class="slot-remove">‚úï</button>
                        </div>
                    </div>
                    <div class="team-slot" data-slot="5">
                        <div class="slot-empty">Vac√≠o</div>
                        <div class="slot-content" style="display: none;">
                            <img class="slot-img" src="" alt="">
                            <div class="slot-name"></div>
                            <button class="slot-remove">‚úï</button>
                        </div>
                    </div>
                    <div class="team-slot" data-slot="6">
                        <div class="slot-empty">Vac√≠o</div>
                        <div class="slot-content" style="display: none;">
                            <img class="slot-img" src="" alt="">
                            <div class="slot-name"></div>
                            <button class="slot-remove">‚úï</button>
                        </div>
                    </div>
                </div>
                <div class="team-actions">
                    <button id="save-team" class="pokedex-button">üíæ Guardar Equipo</button>
                    <button id="load-team" class="pokedex-button">üìÇ Cargar Equipo</button>
                    <button id="clear-team" class="pokedex-button secondary">üóëÔ∏è Limpiar Equipo</button>
                </div>
                <div class="team-stats" id="team-stats" style="display: none;">
                    <h3>Estad√≠sticas del Equipo</h3>
                    <div id="team-type-coverage"></div>
                    <div id="team-weaknesses"></div>
                </div>
                <div class="team-instructions">
                    <p><strong>Instrucciones:</strong></p>
                    <ul>
                        <li>Haz clic en "A√±adir al equipo" en cualquier Pok√©mon para agregarlo</li>
                        <li>Cada equipo puede tener m√°ximo 6 Pok√©mon</li>
                        <li>Puedes guardar y cargar m√∫ltiples equipos</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Comparaci√≥n -->
    <div id="compare-modal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 1200px;">
            <div class="modal-header">
                <h2>Comparar Pok√©mon</h2>
                <button class="close-button">&times;</button>
            </div>
            
            <div class="compare-container" id="compare-container">
                <!-- Selector de Pok√©mon -->
                <div class="compare-selector">
                    <h4>Selecciona hasta 6 Pok√©mon para comparar</h4>
                    <div class="compare-slots-grid">
                        <div class="compare-slot" data-slot="1">
                            <div class="slot-empty">
                                <div class="slot-plus">+</div>
                                <div>A√±adir Pok√©mon</div>
                            </div>
                            <div class="slot-content" style="display: none;">
                                <img class="slot-img" src="" alt="">
                                <div class="slot-name"></div>
                                <button class="slot-remove">‚úï</button>
                            </div>
                        </div>
                        <div class="compare-slot" data-slot="2">
                            <div class="slot-empty">
                                <div class="slot-plus">+</div>
                                <div>A√±adir Pok√©mon</div>
                            </div>
                            <div class="slot-content" style="display: none;">
                                <img class="slot-img" src="" alt="">
                                <div class="slot-name"></div>
                                <button class="slot-remove">‚úï</button>
                            </div>
                        </div>
                        <div class="compare-slot" data-slot="3">
                            <div class="slot-empty">
                                <div class="slot-plus">+</div>
                                <div>A√±adir Pok√©mon</div>
                            </div>
                            <div class="slot-content" style="display: none;">
                                <img class="slot-img" src="" alt="">
                                <div class="slot-name"></div>
                                <button class="slot-remove">‚úï</button>
                            </div>
                        </div>
                        <div class="compare-slot" data-slot="4">
                            <div class="slot-empty">
                                <div class="slot-plus">+</div>
                                <div>A√±adir Pok√©mon</div>
                            </div>
                            <div class="slot-content" style="display: none;">
                                <img class="slot-img" src="" alt="">
                                <div class="slot-name"></div>
                                <button class="slot-remove">‚úï</button>
                            </div>
                        </div>
                        <div class="compare-slot" data-slot="5">
                            <div class="slot-empty">
                                <div class="slot-plus">+</div>
                                <div>A√±adir Pok√©mon</div>
                            </div>
                            <div class="slot-content" style="display: none;">
                                <img class="slot-img" src="" alt="">
                                <div class="slot-name"></div>
                                <button class="slot-remove">‚úï</button>
                            </div>
                        </div>
                        <div class="compare-slot" data-slot="6">
                            <div class="slot-empty">
                                <div class="slot-plus">+</div>
                                <div>A√±adir Pok√©mon</div>
                            </div>
                            <div class="slot-content" style="display: none;">
                                <img class="slot-img" src="" alt="">
                                <div class="slot-name"></div>
                                <button class="slot-remove">‚úï</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="compare-quick-actions">
                        <button id="compare-from-team" class="pokedex-button small">Usar Mi Equipo</button>
                        <button id="compare-random" class="pokedex-button small">Aleatorio</button>
                        <button id="compare-by-type" class="pokedex-button small">Por Tipo</button>
                    </div>
                </div>

                <!-- Tabs de comparaci√≥n -->
                <div class="compare-tabs">
                    <button class="compare-tab-button active" data-tab="table">üìä Tabla</button>
                    <button class="compare-tab-button" data-tab="radar">üìà Gr√°fico Radar</button>
                    <button class="compare-tab-button" data-tab="types">üõ°Ô∏è An√°lisis de Tipos</button>
                    <button class="compare-tab-button" data-tab="sidebyside">üë• Vista Comparativa</button>
                </div>

                <!-- Contenido de las tabs -->
                <div class="compare-tab-content">
                    <!-- Tabla comparativa -->
                    <div id="compare-table" class="compare-tab-pane active">
                        <div class="comparison-table-container">
                            <table class="comparison-table">
                                <thead>
                                    <tr>
                                        <th class="stat-header">Stat</th>
                                        <!-- Las columnas de Pok√©mon se generar√°n din√°micamente -->
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Las filas de stats se generar√°n din√°micamente -->
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="comparison-summary">
                            <h4>Resumen Comparativo</h4>
                            <div id="comparison-stats-summary" class="stats-summary">
                                <!-- Resumen se generar√° din√°micamente -->
                            </div>
                        </div>
                    </div>

                    <!-- Gr√°fico radar -->
                    <div id="compare-radar" class="compare-tab-pane">
                        <div class="radar-chart-container">
                            <canvas id="radar-chart" width="600" height="400"></canvas>
                        </div>
                        <div class="radar-legend" id="radar-legend">
                            <!-- Leyenda se generar√° din√°micamente -->
                        </div>
                    </div>

                    <!-- An√°lisis de tipos -->
                    <div id="compare-types" class="compare-tab-pane">
                        <div class="type-analysis-section">
                            <h4>üõ°Ô∏è Cobertura de Tipos del Grupo</h4>
                            <div id="type-coverage-analysis" class="coverage-grid">
                                <!-- An√°lisis de cobertura se generar√° din√°micamente -->
                            </div>
                        </div>
                        
                        <div class="type-analysis-section">
                            <h4>‚öîÔ∏è Debilidades y Resistencias Comunes</h4>
                            <div id="shared-weaknesses" class="weakness-analysis">
                                <!-- Debilidades comunes se generar√°n din√°micamente -->
                            </div>
                        </div>
                        
                        <div class="type-analysis-section">
                            <h4>üìä Balance de Tipos</h4>
                            <div id="type-balance" class="balance-chart">
                                <!-- Balance se generar√° din√°micamente -->
                            </div>
                        </div>
                    </div>

                    <!-- Vista side-by-side -->
                    <div id="compare-sidebyside" class="compare-tab-pane">
                        <div class="sidebyside-container" id="sidebyside-container">
                            <!-- Vistas individuales de Pok√©mon se generar√°n din√°micamente -->
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="compare-actions">
                <button id="clear-comparison" class="pokedex-button secondary">üóëÔ∏è Limpiar</button>
                <button id="export-comparison" class="pokedex-button">üíæ Exportar Grupo</button>
                <button id="import-comparison" class="pokedex-button">üìÇ Importar Grupo</button>
                <button id="save-comparison-group" class="pokedex-button">‚≠ê Guardar Grupo</button>
            </div>
        </div>
    </div>

    <!-- Modal de Tabla de Tipos -->
    <div id="type-chart-modal" class="modal" style="display: none;">
        <div class="modal-content type-chart-modal">
            <div class="modal-header">
                <h2>Tabla de Efectividad de Tipos Pok√©mon</h2>
                <button class="close-button">&times;</button>
            </div>
            <div class="type-chart-container">
                <div class="type-chart-controls">
                    <div class="effectiveness-filter">
                        <label>Filtrar por efectividad:</label>
                        <select id="effectiveness-filter" class="pokedex-button small">
                            <option value="all">Todas las efectividades</option>
                            <option value="2">2√ó (Efectivo)</option>
                            <option value="1">1√ó (Normal)</option>
                            <option value="0.5">0.5√ó (Poco efectivo)</option>
                            <option value="0">0√ó (Sin efecto)</option>
                        </select>
                    </div>
                </div>
                
                <div class="type-chart-table-container">
                    <div id="type-chart-table" class="type-chart-table">
                        <!-- La tabla se generar√° din√°micamente -->
                    </div>
                </div>
                
                <div class="type-chart-legend">
                    <h4>üìä Leyenda de Efectividad:</h4>
                    <div class="legend-items">
                        <div class="legend-item">
                            <span class="legend-color effectiveness-2"></span>
                            <span class="legend-text">2√ó - Efectivo</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color effectiveness-1"></span>
                            <span class="legend-text">1√ó - Normal</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color effectiveness-05"></span>
                            <span class="legend-text">0.5√ó - Poco efectivo</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color effectiveness-0"></span>
                            <span class="legend-text">0√ó - Sin efecto</span>
                        </div>
                    </div>
                </div>
                
                <div class="type-chart-info">
                    <h4>üí° C√≥mo leer la tabla:</h4>
                    <ul>
                        <li><strong>Vista de Ataque:</strong> Muestra cu√°n efectivo es cada tipo de ataque contra cada tipo de Pok√©mon</li>
                        <li><strong>Vista de Defensa:</strong> Muestra cu√°n vulnerable es cada tipo de Pok√©mon a cada tipo de ataque</li>
                        <li><strong>Haz clic en cualquier celda</strong> para ver detalles espec√≠ficos de esa combinaci√≥n de tipos</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Quiz - A√±adir junto a los otros modales -->
    <div id="quiz-modal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h2>üéØ Quiz Pok√©mon</h2>
                <button class="close-button">&times;</button>
            </div>
            <div class="quiz-container">
                <!-- Pantalla de selecci√≥n de modo -->
                <div id="quiz-mode-selection" class="quiz-screen active">
                    <div class="quiz-header">
                        <div class="pokeball-logo-small"></div>
                        <h3>Selecciona un modo de quiz</h3>
                        <p>Pon a prueba tus conocimientos Pok√©mon</p>
                    </div>
                    
                    <div class="quiz-modes-grid">
                        <div class="quiz-mode-card" data-mode="types">
                            <div class="mode-icon">‚ö°</div>
                            <h4>Quiz de Tipos</h4>
                            <p>¬øQu√© tipo es efectivo contra...?</p>
                            <div class="mode-difficulty">
                                <span class="difficulty-badge easy">F√°cil</span>
                                <span class="difficulty-badge medium">Medio</span>
                                <span class="difficulty-badge hard">Dif√≠cil</span>
                            </div>
                        </div>
                        
                        <div class="quiz-mode-card" data-mode="names">
                            <div class="mode-icon">üëÅÔ∏è</div>
                            <h4>Quiz de Nombres</h4>
                            <p>Identifica Pok√©mon por imagen</p>
                            <div class="mode-difficulty">
                                <span class="difficulty-badge easy">F√°cil</span>
                                <span class="difficulty-badge medium">Medio</span>
                                <span class="difficulty-badge hard">Dif√≠cil</span>
                            </div>
                        </div>
                        
                        <div class="quiz-mode-card" data-mode="stats">
                            <div class="mode-icon">üìä</div>
                            <h4>Quiz de Stats</h4>
                            <p>Preguntas sobre estad√≠sticas</p>
                            <div class="mode-difficulty">
                                <span class="difficulty-badge medium">Medio</span>
                                <span class="difficulty-badge hard">Dif√≠cil</span>
                            </div>
                        </div>
                        
                        <div class="quiz-mode-card" data-mode="evolutions">
                            <div class="mode-icon">üîÑ</div>
                            <h4>Quiz de Evoluciones</h4>
                            <p>Cadena evolutiva de Pok√©mon</p>
                            <div class="mode-difficulty">
                                <span class="difficulty-badge easy">F√°cil</span>
                                <span class="difficulty-badge hard">Dif√≠cil</span>
                            </div>
                        </div>
                        
                        <div class="quiz-mode-card" data-mode="abilities">
                            <div class="mode-icon">‚öôÔ∏è</div>
                            <h4>Quiz de Habilidades</h4>
                            <p>Identifica habilidades de Pok√©mon</p>
                            <div class="mode-difficulty">
                                <span class="difficulty-badge medium">Medio</span>
                                <span class="difficulty-badge hard">Dif√≠cil</span>
                            </div>
                        </div>
                        
                        <div class="quiz-mode-card" data-mode="moves">
                            <div class="mode-icon">üí•</div>
                            <h4>Quiz de Movimientos</h4>
                            <p>¬øQu√© movimientos aprende?</p>
                            <div class="mode-difficulty">
                                <span class="difficulty-badge medium">Medio</span>
                                <span class="difficulty-badge hard">Dif√≠cil</span>
                            </div>
                        </div>
                        
                        <div class="quiz-mode-card" data-mode="generations">
                            <div class="mode-icon">üìö</div>
                            <h4>Quiz de Generaciones</h4>
                            <p>¬øDe qu√© generaci√≥n es?</p>
                            <div class="mode-difficulty">
                                <span class="difficulty-badge easy">F√°cil</span>
                                <span class="difficulty-badge hard">Dif√≠cil</span>
                            </div>
                        </div>
                        
                        <div class="quiz-mode-card" data-mode="comparative">
                            <div class="mode-icon">‚öñÔ∏è</div>
                            <h4>Quiz Comparativo</h4>
                            <p>Compara estad√≠sticas de Pok√©mon</p>
                            <div class="mode-difficulty">
                                <span class="difficulty-badge medium">Medio</span>
                                <span class="difficulty-badge hard">Dif√≠cil</span>
                            </div>
                        </div>
                        
                        <div class="quiz-mode-card" data-mode="weaknesses">
                            <div class="mode-icon">üõ°Ô∏è</div>
                            <h4>Quiz de Debilidades</h4>
                            <p>Conoce las resistencias de tipos</p>
                            <div class="mode-difficulty">
                                <span class="difficulty-badge easy">F√°cil</span>
                                <span class="difficulty-badge hard">Dif√≠cil</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="quiz-difficulty-selection">
                        <h4>Dificultad:</h4>
                        <div class="difficulty-options">
                            <button class="difficulty-btn active" data-difficulty="easy">F√°cil</button>
                            <button class="difficulty-btn" data-difficulty="medium">Medio</button>
                            <button class="difficulty-btn" data-difficulty="hard">Dif√≠cil</button>
                        </div>
                    </div>
                    
                    <div class="quiz-stats-preview">
                        <h4>Tus Estad√≠sticas</h4>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <span class="stat-value" id="total-quizzes">0</span>
                                <span class="stat-label">Quizzes</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value" id="high-score">0</span>
                                <span class="stat-label">Mejor Puntuaci√≥n</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value" id="correct-answers">0%</span>
                                <span class="stat-label">Precisi√≥n</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Pantalla de pregunta -->
                <div id="quiz-question-screen" class="quiz-screen">
                    <div class="quiz-progress">
                        <div class="progress-info">
                            <span id="quiz-progress-text">Pregunta 1/15</span>
                            <span class="quiz-score">Puntos: <span id="current-score">0</span></span>
                        </div>
                        <div class="progress-bar">
                            <div id="quiz-progress-bar" class="progress-bar-fill"></div>
                        </div>
                    </div>
                    
                    <div class="quiz-question-container">
                        <div id="quiz-question" class="quiz-question">
                            <!-- La pregunta se insertar√° aqu√≠ -->
                        </div>
                        
                        <div id="quiz-image-container" class="quiz-image-container" style="display: none;">
                            <img id="quiz-pokemon-image" src="" alt="Pok√©mon" class="quiz-pokemon-img">
                            <div id="quiz-silhouette" class="silhouette-overlay" style="display: none;"></div>
                        </div>
                        
                        <div id="quiz-options" class="quiz-options">
                            <!-- Las opciones se insertar√°n aqu√≠ -->
                        </div>
                    </div>
                    
                    <div class="quiz-footer">
                        <div class="quiz-lives">
                            <span class="lives-label">Vidas:</span>
                            <div class="hearts-container" id="hearts-container">
                                <!-- Corazones se insertar√°n aqu√≠ -->
                            </div>
                        </div>
                        <div class="quiz-actions">
                            <button id="quiz-skip" class="pokedex-button secondary">Saltar</button>
                            <button id="quiz-hint" class="pokedex-button secondary">Pista</button>
                        </div>
                    </div>
                </div>

                <!-- Pantalla de resultados -->
                <div id="quiz-results-screen" class="quiz-screen">
                    <div class="results-header">
                        <div class="results-icon" id="results-icon">üéâ</div>
                        <h3 id="results-title">¬°Quiz Completado!</h3>
                        <p id="results-subtitle">Has completado el quiz de tipos</p>
                    </div>
                    
                    <div class="results-stats">
                        <div class="result-stat">
                            <span class="stat-number" id="final-score">0</span>
                            <span class="stat-label">Puntuaci√≥n</span>
                        </div>
                        <div class="result-stat">
                            <span class="stat-number" id="correct-count">0</span>
                            <span class="stat-label">Correctas</span>
                        </div>
                        <div class="result-stat">
                            <span class="stat-number" id="accuracy-percent">0%</span>
                            <span class="stat-label">Precisi√≥n</span>
                        </div>
                        <div class="result-stat">
                            <span class="stat-number" id="time-taken">0s</span>
                            <span class="stat-label">Tiempo</span>
                        </div>
                    </div>
                    
                    <div class="results-breakdown">
                        <h4>Desglose de Respuestas</h4>
                        <div id="answers-breakdown" class="answers-list">
                            <!-- El desglose se insertar√° aqu√≠ -->
                        </div>
                    </div>
                    
                    <div class="achievements-unlocked" id="achievements-container" style="display: none;">
                        <h4>üéñÔ∏è Logros Desbloqueados</h4>
                        <div id="achievements-list" class="achievements-list">
                            <!-- Logros se insertar√°n aqu√≠ -->
                        </div>
                    </div>
                    
                    <div class="results-actions">
                        <button id="quiz-restart" class="pokedex-button">Jugar de Nuevo</button>
                        <button id="quiz-change-mode" class="pokedex-button secondary">Cambiar Modo</button>
                        <button id="quiz-leaderboard" class="pokedex-button secondary">Leaderboard</button>
                    </div>
                </div>

                <!-- Pantalla de Leaderboard -->
                <div id="quiz-leaderboard-screen" class="quiz-screen">
                    <div class="leaderboard-header">
                        <h3>üèÜ Leaderboard</h3>
                        <p>Mejores puntuaciones por modo</p>
                    </div>
                    
                    <div class="leaderboard-tabs">
                        <button class="leaderboard-tab active" data-mode="types">Tipos</button>
                        <button class="leaderboard-tab" data-mode="names">Nombres</button>
                        <button class="leaderboard-tab" data-mode="stats">Stats</button>
                        <button class="leaderboard-tab" data-mode="evolutions">Evoluciones</button>
                    </div>
                    
                    <div class="leaderboard-content">
                        <div id="leaderboard-list" class="leaderboard-list">
                            <!-- Leaderboard se insertar√° aqu√≠ -->
                        </div>
                    </div>
                    
                    <div class="leaderboard-actions">
                        <button id="leaderboard-back" class="pokedex-button secondary">Volver</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Historial -->
    <div id="history-modal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h2>Historial de Navegaci√≥n</h2>
                <button class="close-button">&times;</button>
            </div>
            <div class="history-container">
                <div id="history-list">
                    <!-- El historial se generar√° din√°micamente -->
                </div>
                <div class="history-actions">
                    <button id="clear-history" class="pokedex-button secondary">Limpiar Historial</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Pok√©mon 3D Animado -->
    <div id="pokemon-3d-modal" class="modal pokemon-3d-modal" style="display: none;">
        <div class="modal-content pokemon-3d-content">
            <div class="modal-header">
                <h2 id="pokemon-3d-title">Pok√©mon 3D Interactivo</h2>
                <button class="close-button pokemon-3d-close">&times;</button>
            </div>
            <model-viewer id="pokemon-3d-viewer" class="pokemon-3d-viewer" camera-controls="" touch-action="pan-y" environment-image="neutral" animation-name="" ar-status="not-presenting"></model-viewer>
            <div class="pokemon-3d-controls">
                <p>üñ±Ô∏è Arrastra para rotar | üîç Rueda para zoom</p>
            </div>
        </div>
    </div>

    <!-- BOT√ìN FLOTANTE - FUERA DE TODOS LOS MODALES, EN LA P√ÅGINA PRINCIPAL -->
    <button id="team-btn" class="pokedex-button floating-btn">
        üõ°Ô∏è Mi Equipo
    </button>
    <!-- BOT√ìN FLOTANTE TABLA DE TIPOS - FUERA DE TODOS LOS MODALES -->
    <button id="type-chart-btn" class="pokedex-button floating-btn type-chart-btn">
        üìà Tabla de Tipos
    </button>   

    <button id="quiz-btn" class="pokedex-button floating-btn quiz-btn">
        üéØ Quiz
    </button>
    <!-- A√±adir junto a los otros botones flotantes -->
    <button id="compare-btn" class="pokedex-button floating-btn">
        ‚öñÔ∏è Comparar
    </button>
    <!-- Elementos de audio para sonidos UI (generados por Web Audio API) -->
    <audio id="click-sound" preload="auto" style="display: none;"></audio>
    <audio id="hover-sound" preload="auto" style="display: none;"></audio>
    <audio id="select-sound" preload="auto" style="display: none;"></audio>
    
    <!-- Audio para sonidos de Pok√©mon (din√°mico) -->
    <audio id="pokemon-cry" preload="auto" style="display: none;"></audio>
    
    <script src="script.js"></script>
</body>
</html>